<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Sturgeon_session.html">
<link rel="next" href="Sturgeon_stui.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Sturgeon" rel="Chapter" href="Sturgeon.html">
<link title="Sturgeon_recipes_command" rel="Chapter" href="Sturgeon_recipes_command.html">
<link title="Sturgeon_recipes_server" rel="Chapter" href="Sturgeon_recipes_server.html">
<link title="Sturgeon_session" rel="Chapter" href="Sturgeon_session.html">
<link title="Sturgeon_sexp" rel="Chapter" href="Sturgeon_sexp.html">
<link title="Sturgeon_stui" rel="Chapter" href="Sturgeon_stui.html"><link title="Parametric S-exp" rel="Section" href="#1_ParametricSexp">
<link title="Monomorphic Emacs S-exp format" rel="Section" href="#1_MonomorphicEmacsSexpformat">
<link title="Low-level IO" rel="Section" href="#1_LowlevelIO">
<link title="Higher-level IO" rel="Section" href="#1_HigherlevelIO">
<title>Sturgeon_sexp</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Sturgeon_session.html" title="Sturgeon_session">Previous</a>
&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;<a class="post" href="Sturgeon_stui.html" title="Sturgeon_stui">Next</a>
</div>
<h1>Module <a href="type_Sturgeon_sexp.html">Sturgeon_sexp</a></h1>

<pre><span class="keyword">module</span> Sturgeon_sexp: <code class="code"><span class="keyword">sig</span></code> <a href="Sturgeon_sexp.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info module top">
This is an implementation of (a subset of) Emacs s-expressions.<br>
</div>
<hr width="100%">
<br>
<h1 id="1_ParametricSexp">Parametric S-exp</h1><br>

<pre><code><span id="TYPEsexp"><span class="keyword">type</span> <code class="type">'a</code> sexp</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTsexp.C"><span class="constructor">C</span></span> <span class="keyword">of</span> <code class="type">'a <a href="Sturgeon_sexp.html#TYPEsexp">sexp</a> * 'a <a href="Sturgeon_sexp.html#TYPEsexp">sexp</a></code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
cons cell<br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTsexp.S"><span class="constructor">S</span></span> <span class="keyword">of</span> <code class="type">string</code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
'sym<br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTsexp.T"><span class="constructor">T</span></span> <span class="keyword">of</span> <code class="type">string</code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
"text"<br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTsexp.P"><span class="constructor">P</span></span> <span class="keyword">of</span> <code class="type">'a <a href="Sturgeon_sexp.html#TYPEsexp">sexp</a></code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
#(property)<br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTsexp.I"><span class="constructor">I</span></span> <span class="keyword">of</span> <code class="type">int</code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
1<br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTsexp.F"><span class="constructor">F</span></span> <span class="keyword">of</span> <code class="type">float</code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
1.0<br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTsexp.V"><span class="constructor">V</span></span> <span class="keyword">of</span> <code class="type">'a <a href="Sturgeon_sexp.html#TYPEsexp">sexp</a> list</code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<code class="code">vectors</code><br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTsexp.M"><span class="constructor">M</span></span> <span class="keyword">of</span> <code class="type">'a</code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
user-defined construction, outside of s-exp language<br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr></table>



<pre><span id="VALtransform_list"><span class="keyword">val</span> transform_list</span> : <code class="type">inj:('a -> 'b <a href="Sturgeon_sexp.html#TYPEsexp">sexp</a>) -><br>       ?map:('b <a href="Sturgeon_sexp.html#TYPEsexp">sexp</a> -> 'b <a href="Sturgeon_sexp.html#TYPEsexp">sexp</a>) -><br>       'a <a href="Sturgeon_sexp.html#TYPEsexp">sexp</a> -> 'b <a href="Sturgeon_sexp.html#TYPEsexp">sexp</a></code></pre><div class="info ">
Recursively transform a sexp.
    <code class="code">map</code> function is applied on each atom and at the root of each list<br>
</div>

<pre><span id="VALtransform_cons"><span class="keyword">val</span> transform_cons</span> : <code class="type">inj:('a -> 'b <a href="Sturgeon_sexp.html#TYPEsexp">sexp</a>) -><br>       ?map:('b <a href="Sturgeon_sexp.html#TYPEsexp">sexp</a> -> 'b <a href="Sturgeon_sexp.html#TYPEsexp">sexp</a>) -><br>       'a <a href="Sturgeon_sexp.html#TYPEsexp">sexp</a> -> 'b <a href="Sturgeon_sexp.html#TYPEsexp">sexp</a></code></pre><div class="info ">
Recursively transform a sexp.
    <code class="code">map</code> function is applied on each atom and each cons-cell<br>
</div>

<pre><span id="VALsym_nil"><span class="keyword">val</span> sym_nil</span> : <code class="type">'a <a href="Sturgeon_sexp.html#TYPEsexp">sexp</a></code></pre><div class="info ">
nil constant: S "nil"<br>
</div>

<pre><span id="VALsym_t"><span class="keyword">val</span> sym_t</span> : <code class="type">'a <a href="Sturgeon_sexp.html#TYPEsexp">sexp</a></code></pre><div class="info ">
t constant: S "t"<br>
</div>

<pre><span id="VALsexp_of_list"><span class="keyword">val</span> sexp_of_list</span> : <code class="type">?tail:'a <a href="Sturgeon_sexp.html#TYPEsexp">sexp</a> -><br>       'a <a href="Sturgeon_sexp.html#TYPEsexp">sexp</a> list -> 'a <a href="Sturgeon_sexp.html#TYPEsexp">sexp</a></code></pre><div class="info ">
Build a sexp list,
    []      -&gt; nil
    x :: xs -&gt; C (x, sexp_of_list xs)<br>
</div>

<pre><span id="VALsexp_mem"><span class="keyword">val</span> sexp_mem</span> : <code class="type">'a <a href="Sturgeon_sexp.html#TYPEsexp">sexp</a> -> 'a <a href="Sturgeon_sexp.html#TYPEsexp">sexp</a> -> bool</code></pre><div class="info ">
Does an element belong to a sexp list?<br>
</div>
<br>
<h1 id="1_MonomorphicEmacsSexpformat">Monomorphic Emacs S-exp format</h1><br>

<pre><span id="TYPEvoid"><span class="keyword">type</span> <code class="type"></code>void</span> </pre>


<pre><span id="VALvoid"><span class="keyword">val</span> void</span> : <code class="type"><a href="Sturgeon_sexp.html#TYPEvoid">void</a> -> 'a</code></pre>
<pre><span id="TYPEbasic"><span class="keyword">type</span> <code class="type"></code>basic</span> = <code class="type"><a href="Sturgeon_sexp.html#TYPEvoid">void</a> <a href="Sturgeon_sexp.html#TYPEsexp">sexp</a></code> </pre>


<pre><span id="VALgeneralize_basic"><span class="keyword">val</span> generalize_basic</span> : <code class="type"><a href="Sturgeon_sexp.html#TYPEbasic">basic</a> -> 'a <a href="Sturgeon_sexp.html#TYPEsexp">sexp</a></code></pre><div class="info ">
Recover polymorphism<br>
</div>
<br>
<h1 id="1_LowlevelIO">Low-level IO</h1><br>

<pre><span id="VALtell_sexp"><span class="keyword">val</span> tell_sexp</span> : <code class="type">(string -> unit) -> <a href="Sturgeon_sexp.html#TYPEbasic">basic</a> -> unit</code></pre><div class="info ">
Serialize an s-exp by repetively calling a string printing function.<br>
</div>

<pre><span id="VALread_sexp"><span class="keyword">val</span> read_sexp</span> : <code class="type">(unit -> char) -> <a href="Sturgeon_sexp.html#TYPEbasic">basic</a> * char</code></pre><div class="info ">
Read an basic by repetively calling a character reading function.
<p>

    The character reading function can return '\000' to signal EOF.
<p>

    Returns the basic and, if any, the last character read but not part of the
    sexp, or '\000'.
<p>

    If the basic is not well-formed, a Failure is raised.  You can catch it and
    add relevant location information.
    The error is always due to the last call to the reading function, which
    should be enough to locate the erroneous input, except for unterminated
    string.<br>
</div>
<br>
<h1 id="1_HigherlevelIO">Higher-level IO</h1><br>

<pre><span id="VALto_buf"><span class="keyword">val</span> to_buf</span> : <code class="type"><a href="Sturgeon_sexp.html#TYPEbasic">basic</a> -> Buffer.t -> unit</code></pre>
<pre><span id="VALto_string"><span class="keyword">val</span> to_string</span> : <code class="type"><a href="Sturgeon_sexp.html#TYPEbasic">basic</a> -> string</code></pre>
<pre><span id="VALof_string"><span class="keyword">val</span> of_string</span> : <code class="type">string -> <a href="Sturgeon_sexp.html#TYPEbasic">basic</a></code></pre>
<pre><span id="VALof_file_descr"><span class="keyword">val</span> of_file_descr</span> : <code class="type">on_read:(Unix.file_descr -> unit) -><br>       Unix.file_descr -> unit -> <a href="Sturgeon_sexp.html#TYPEbasic">basic</a> option</code></pre><div class="info ">
Read from a file descriptor.
<p>

    <code class="code">on_read</code> is called before a potentially blocking read is done, so that you
    can act before blocking (select, notify scheduler ...).
<p>

    Partial application (stopping before the last <code class="code">()</code>) allows to read a stream
    of sexp.<br>
</div>

<pre><span id="VALof_channel"><span class="keyword">val</span> of_channel</span> : <code class="type">Pervasives.in_channel -> unit -> <a href="Sturgeon_sexp.html#TYPEbasic">basic</a> option</code></pre><div class="info ">
Read from a channel.
<p>

    Partial application (stopping before the last <code class="code">()</code>) allows to read a stream
    of sexp.<br>
</div>
</body></html>